<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Building Larger Apps - vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Lato|Inconsolata' rel='stylesheet' type='text/css'>
        <link rel="icon" href="/images/logo.png" type="image/x-icon">
        <script>
            window.PAGE_TYPE = "guide"
        </script>
        <script src="/js/vue.min.js"></script>
        <link rel="stylesheet" href="/vuejs.org/css/page.css" type="text/css">
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46852172-1', 'vuejs.org');
  ga('send', 'pageview');
</script>
    </head>
    <body>
        
            <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>Vue.js</span>
    </a>
    <ul id="nav">
        <li><a href="/guide/" class="nav-link current">Guide</a></li>
        <li><a href="/api/" class="nav-link">API Reference</a></li>
        <br class="break" />
        <li><a href="/examples/" class="nav-link">Examples</a></li>
        <li><a href="/blog/" class="nav-link">Blog</a></li>
        <li><a href="https://github.com/yyx990803/vue" target="_blank" class="nav-link">GitHub</a></li>
    </ul>
</div>
        
        <div id="main">
        
            
    <div class="sidebar">
    <div class="toggle">···</div>
    <div class="list">
        <h2>Guide</h2>
        <ul>
        
            <li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li>
        
            <li><a href="/guide/index.html" class="sidebar-link">はじめに</a></li>
        
            <li><a href="/guide/directives.html" class="sidebar-link">ディレクティブの詳細</a></li>
        
            <li><a href="/guide/filters.html" class="sidebar-link">Filters in Depth</a></li>
        
            <li><a href="/guide/list.html" class="sidebar-link">Displaying a List</a></li>
        
            <li><a href="/guide/events.html" class="sidebar-link">Listening for Events</a></li>
        
            <li><a href="/guide/forms.html" class="sidebar-link">Handling Forms</a></li>
        
            <li><a href="/guide/computed.html" class="sidebar-link">Computed Properties</a></li>
        
            <li><a href="/guide/transitions.html" class="sidebar-link">Adding Transition Effects</a></li>
        
            <li><a href="/guide/composition.html" class="sidebar-link">Composing Components</a></li>
        
            <li><a href="/guide/application.html" class="sidebar-link current">Building Larger Apps</a></li>
        
            <li><a href="/guide/plugin.html" class="sidebar-link">Plugins</a></li>
        
        </ul>
    </div>
</div>

<div class="content guide with-sidebar">
    <h1>Building Larger Apps</h1>
    <p>Vue.js is designed to be as flexible as possible - it’s just an interface library that doesn’t enforce any architectural decisions. While this can be very useful for rapid prototyping, it could be a challenge for those with less experience to build larger scale applications with it. The following is an opinionated perspective on how to organize larger projects when using Vue.js.</p>
<h2 id="Build_with_Component">Build with Component</h2>
<p><img src="http://component.io/boot/images/logo.png"></p>
<p>Vue.js is built with <a href="https://github.com/component/component" target="_blank">Component</a>, a front-end package manager and build tool. With Component you can write your browser code in the format of CommonJS modules (the same format Node.js uses), and publish packages simply by pushing them to public GitHub repositories. This helps greatly with both code modularization and reusability. For a boilerplate of using Vue.js with Component, see the <a href="https://github.com/vuejs/vue-component-example" target="_blank">vue-component-example</a>.</p>
<p>There are already <a href="https://github.com/component/component/wiki/Components" target="_blank">a great number of public components</a> available that deal with common problems in front-end applications. For a larger scale application, you can use Vue.js as the interface layer and fill in the missing pieces with other components.</p>
<p>Alternatively, <a href="http://browserify.org/" target="_blank">Browserify</a> is another excellent CommonJS based build system for browser JavaScript. Instead of GitHub repos, Browserify leverages NPM as its package manager and also has a thriving community.</p>
<h2 id="Modularization">Modularization</h2>
<p>Component as a built tool not only deals with JavaScript; it can also build CSS, templates and other assets. With builder hooks it can also pre-process files written in non-native formats, e.g. CoffeeScript, SASS and Stylus. Therefore it is possible to deliver highly self-contained components that encapsulates template structure, JavaScript logic and CSS presentation at the same time. A simple example can be found <a href="https://github.com/vuejs/vue-component-example/tree/master/src/components/a" target="_blank">here</a>.</p>
<p>Similar modularization can be achieved in Browserify too, with transform plugins such as <a href="https://github.com/bclinkinbeard/partialify" target="_blank">partialify</a>. A simple setup example can be found <a href="https://github.com/vuejs/vue-browserify-example" target="_blank">here</a>.</p>
<h2 id="Routing">Routing</h2>
<p>You can implement some rudimentary routing logic by manually listening on hashchange and utilizing the <code>v-view</code> direcitve. The <code>v-view</code> directive is essentially a dynamic component loader: it binds to a string value and creates a new VM instance using that string as the Component ID (and destroys the old VM if it exists). Example:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"app"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">v-view</span>=<span class="value">"currentView"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>Vue.component(<span class="string">'home'</span>, { <span class="comment">/* ... */</span> })
Vue.component(<span class="string">'page1'</span>, { <span class="comment">/* ... */</span> })

<span class="keyword">var</span> app = <span class="keyword">new</span> Vue({
    el: <span class="string">'#app'</span>,
    data: {
        currentView: <span class="string">'home'</span>
    }
})
</pre></td></tr></table></figure>

<p>The <code>home</code> component will be rendered in place of <code>v-view</code>. When <code>currentView</code>‘s value changes to <code>page1</code>, the existing <code>home</code> component will be destroyed and replaced by the new <code>page1</code> component. The full, more detailed example can be found <a href="https://github.com/yyx990803/vue/blob/master/test/functional/fixtures/routing.html" target="_blank">here</a>.</p>
<p class="tip"><code>v-view</code> will replace the element it’s bound to with the new instantiated VM’s element, so avoid using it on your root element.</p>

<p>With <code>v-view</code> it’s very easy to leverage standalone routing libraries such as <a href="https://github.com/visionmedia/page.js" target="_blank">Page.js</a> and <a href="https://github.com/flatiron/director" target="_blank">Director</a>. There is plan to provide a vue-router component that integrates with Vue.js for easier routing and deep linking.</p>
<h2 id="Communication_with_Server">Communication with Server</h2>
<p>All Vue.js ViewModels can have their raw <code>$data</code> directly serialized with <code>JSON.stringify()</code> with no additional effort. You can use any Ajax component you like, for example <a href="https://github.com/visionmedia/superagent" target="_blank">SuperAgent</a>. It also plays nicely with no-backend services such as Firebase. In addition there is plan to provide a vue-resource component that resembles Angular’s <code>$resource</code>, to make interfacing with a REST API easier.</p>
<h2 id="Unit_Testing">Unit Testing</h2>
<p>By using Component, Vue.js entities (ViewModel constructors, directives, filters) within a large project can be split into separate CommonJS modules. When a Component-based project is built without the <code>standalone</code> flag, it will expose its <code>require()</code> method, granting access to all these internal modules. This makes it quite easy to write browser unit tests - just include the test build and require the module you want to test.</p>
<p>The best practice is to export raw options / functions inside modules. Consider this example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="comment">// my-component.js</span>
module.exports = {
    created: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">this</span>.message = <span class="string">'hello!'</span>
    }
}
</pre></td></tr></table></figure>

<p>You can use that file in your entry module like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="comment">// main.js</span>
<span class="keyword">var</span> Vue = <span class="built_in">require</span>(<span class="string">'vue'</span>)

<span class="keyword">var</span> app = <span class="keyword">new</span> Vue({
    el: <span class="string">'#app'</span>,
    data: { <span class="comment">/* ... */</span> },
    components: {
        <span class="string">'my-component'</span>: <span class="built_in">require</span>(<span class="string">'./my-component'</span>)
    }
})
</pre></td></tr></table></figure>

<p>And you can test that module like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="comment">// Some Mocha tests</span>
<span class="comment">// using a non-standalone build of the project</span>
describe(<span class="string">'my-component'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    
    <span class="comment">// require exposed internal module</span>
    <span class="keyword">var</span> myComponent = <span class="built_in">require</span>(<span class="string">'my-project/src/my-component'</span>)

    it(<span class="string">'should have a created hook'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        assert.equal(<span class="keyword">typeof</span> myComponent.created, <span class="string">'function'</span>)
    })

    it(<span class="string">'should set message in the created hook'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">var</span> mock = {}
        myComponent.created.call(mock)
        assert.equal(mock.message, <span class="string">'hello!'</span>)
    })

})
</pre></td></tr></table></figure>

<p class="tip">Since Vue.js bindings update asynchronously, you should use <code>Vue.nextTick()</code> when asserting DOM updates after changing the data.</p>
</div>
        
        </div>
        <script src="/js/common.js"></script>
    </body>
</html>